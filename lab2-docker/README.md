# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ 2 - Docker

---

## –í–≤–µ–¥–µ–Ω–∏–µ


–í —Ä–∞–º–∫–∞—Ö –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:

1. –ù–∞–ø–∏—Å–∞—Ç—å ‚Äú–ø–ª–æ—Ö–æ–π‚Äù Dockerfile, –≤ –∫–æ—Ç–æ—Ä–æ–º –µ—Å—Ç—å –Ω–µ –º–µ–Ω–µ–µ —Ç—Ä–µ—Ö ‚Äúbad practices‚Äù –ø–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—é –¥–æ–∫–µ—Ä—Ñ–∞–π–ª–æ–≤
2. –ù–∞–ø–∏—Å–∞—Ç—å ‚Äú—Ö–æ—Ä–æ—à–∏–π‚Äù Dockerfile, –≤ –∫–æ—Ç–æ—Ä–æ–º —ç—Ç–∏ –ø–ª–æ—Ö–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
3. –í Readme –æ–ø–∏—Å–∞—Ç—å –∫–∞–∂–¥—É—é –∏–∑ –ø–ª–æ—Ö–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫ –≤ –ø–ª–æ—Ö–æ–º –¥–æ–∫–µ—Ä—Ñ–∞–π–ª–µ, –ø–æ—á–µ–º—É –æ–Ω–∞ –ø–ª–æ—Ö–∞—è –∏ –∫–∞–∫ –≤ —Ö–æ—Ä–æ—à–µ–º –æ–Ω–∞ –±—ã–ª–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞, –∫–∞–∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–≤–ª–∏—è–ª–æ –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
4. –í Readme –æ–ø–∏—Å–∞—Ç—å 2 –ø–ª–æ—Ö–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫–∏ –ø–æ —Ä–∞–±–æ—Ç–µ —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏. ! –ù–µ –ø–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—é –¥–æ–∫–µ—Ä—Ñ–∞–π–ª–æ–≤, –∞ –æ —Ç–æ–º, –∫–∞–∫ –¥–∞–∂–µ –∏—Å–ø–æ–ª—å–∑—É—è —Ö–æ—Ä–æ—à–∏–π –¥–æ–∫–µ—Ä—Ñ–∞–π–ª –º–æ–∂–Ω–æ –Ω–∞–∫–æ—Å—è—á–∏—Ç—å –∏–º–µ–Ω–Ω–æ –≤ —Ä–∞–±–æ—Ç–µ —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏.

---

## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —á–∞—Å—Ç—å

#### –ù–∞–ø–∏—à–µ–º "–ü–ª–æ—Ö–æ–π" Dockerfile:

```
FROM python:latest

WORKDIR /usr/src/project

ENV AUTH_KEY = "***key***"

COPY requirements.txt . 

RUN apt-get update
RUN apt-get upgrade
RUN pip install -r requirements.txt

COPY . .

CMD ["user.py"]
```

Bad practices:

1. ```FROM python:latest``` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏. –ü—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ –º–æ–≥—É—Ç –±—ã—Ç—å —Ä–∞–∑–ª–∏—á–∏—è –≤ –≤–µ—Ä—Å–∏—è—Ö, –∏–∑-–∑–∞ —á–µ–≥–æ –∫–∞–∫–∏–µ-–ª–∏–±–æ –ø–∞–∫–µ—Ç—ã –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–æ–≥—É—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å, —á—Ç–æ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, —ç—Ç–æ —É–≤–µ–ª–∏—á–∏—Ç —Ä–∞–∑–º–µ—Ä –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç —É—Å—Ç–∞–Ω–æ–≤–∫—É –Ω–µ–Ω—É–∂–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. 
2. ```ENV AUTH_KEY = "***key***"``` - —É–∫–∞–∑–∞–Ω–∏–µ –∫–ª—é—á–µ–π –ø—Ä—è–º–æ –≤ Dockerfile. –≠—Ç–æ –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ. –ü—Ä–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ –º–æ–∂–Ω–æ –∑–∞–±—ã—Ç—å —É–±—Ä–∞—Ç—å –∏–∑ —Ñ–∞–π–ª–∞ –∫–ª—é—á –∏ —ç—Ç–æ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ —É—Ç–µ—á–∫–µ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –µ—Å–ª–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –≤–µ–¥–µ—Ç—Å—è –≤ –Ω–µ–±–æ–ª—å—à–æ–π –∫–æ–º–∞–Ω–¥–µ, –≥–¥–µ –Ω–∏–∫—Ç–æ –Ω–µ —Å–∫—Ä—ã–≤–∞–µ—Ç –∫–ª—é—á–∏, –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –∫–∞–∂–¥—ã–π —Ä–∞–∑ –≤–≤–æ–¥–∏—Ç—å –¥—Ä—É–≥–æ–π –∫–ª—é—á.
3. –ú–Ω–æ–≥–æ—Å–ª–æ–π–Ω–æ—Å—Ç—å:
```
RUN apt-get update
RUN apt-get upgradeCOPY . .
RUN pip install -r requirements.txt
```
–ö–∞–∂–¥–∞—è –∫–æ–º–∞–Ω–¥–∞ RUN —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π —Å–ª–æ–π, —ç—Ç–æ —É–≤–µ–ª–∏—á–∏—Ç —Ä–∞–∑–º–µ—Ä –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏ —ç–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω–æ –∑–∞–º–µ–¥–ª–∏—Ç –ø—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∫–∏. 
4. ```RUN pip install -r requirements.txt``` - –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –Ω–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ. –°–Ω–æ–≤–∞ –≤–æ–ø—Ä–æ—Å —Ä–∞–∑–º–µ—Ä–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. 

#### –ù–∞–ø–∏—à–µ–º "–•–æ—Ä–æ—à–∏–π" Dockerfile:

```
FROM python:3.11.3

WORKDIR /usr/src/project

ENV AUTH_KEY = ${AUTH_KEY}

COPY requirements.txt . 

RUN apt-get update && \
    apt-get upgrade && \
    pip install -r --no-cache-dir requirements.txt

COPY . .

CMD ["user.py"]
```
–ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
1. ```FROM python:3.11.3``` - —É–∫–∞–∑–∞–Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è python - 3.11.3;
2. ```ENV AUTH_KEY = ${AUTH_KEY}``` - —Ç–µ–ø–µ—Ä—å –∫–ª—é—á —Ö—Ä–∞–Ω–∏—Ç—Å—è –Ω–µ –ø—Ä—è–º–æ –≤ Dockerfile, –∞ –±–µ—Ä–µ—Ç—Å—è –∏–∑ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã;
3. 
```
RUN apt-get update && \
    apt-get upgrade && \
    pip install -r --no-cache-dir requirements.txt
```
—Ç—Ä–∏ –∫–æ–º–∞–Ω–¥—ã –æ–±—ä–µ–¥–∏–Ω–∏–ª–∏—Å—å –≤ –æ–¥–Ω—É, —ç—Ç–æ –ø—Ä–∏–≤–µ–ª–æ –∫ —Ç–æ–º—É, —á—Ç–æ –Ω–∞ —ç—Ç–∞–ø–µ —Å–±–æ—Ä–∫–∏ –±—É–¥–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Å–ª–æ–π, –∞ –∑–Ω–∞—á–∏—Ç –ø—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∫–∏ –±—É–¥–µ—Ç –±—ã—Å—Ç—Ä–µ–µ –∏ —Ä–∞–∑–º–µ—Ä –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –±—É–¥–µ—Ç –º–µ–Ω—å—à–µ;

4. ```pip install -r --no-cache-dir requirements.txt``` - –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è. –ù—É, —ç—Ç–æ —Å–Ω–æ–≤–∞ –≤–æ–ø—Ä–æ—Å –ø–∞–º—è—Ç–∏ - —Å–¥–µ–ª–∞–ª–∏ —Å–µ–π—á–∞—Å - –ø–æ—Ç–æ–º —Å–∫–∞–∂–µ–º —Å–µ–±–µ —Å–ø–∞—Å–∏–±–æ üòä.

#### –ü–ª–æ—Ö–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –ø–æ —Ä–∞–±–æ—Ç–µ —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏:

1. –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–µ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ.
–ó–∞–ø—É—Å–∫–∞—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ, –¥–æ—Å—Ç—É–ø –∫ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –ø—Ä–µ–∫—Ä–∞—â–∞–µ—Ç—Å—è - –≤–µ—Å—å –ø–æ—Ç–æ–∫ –±—É–¥–µ—Ç –∑–∞–Ω—è—Ç –ª–æ–≥–∞–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –µ—Å–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ –∏ –∑–∞–∫—Ä—ã—Ç—å —Ç–µ—Ä–º–∏–Ω–∞–ª, —Ç–æ –∑–∞–∫—Ä–æ–µ—Ç—Å—è –∏ —Å–∞–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä. 
–ü–æ—ç—Ç–æ–º—É, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —ç—Ç–∏—Ö –ø—Ä–æ–±–ª–µ–º, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ñ–ª–∞–≥ ```-d``` :

```docker run -d <container name>```

2. –ó–∞–ø—É—Å–∫ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –Ω–∞ –æ–¥–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ. 
–°—Ç–æ–∏—Ç —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å, —Å–∫–æ–ª—å–∫–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–∞ –æ–¥–Ω–æ–º —Ö–æ—Å—Ç–∏–Ω–≥–µ, —á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∑–∏—Ç—å —Å–∏—Å—Ç–µ–º—É. 
–¢–∞–∫–∂–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ –ø–∞–º—è—Ç–∏ –∏ –ø—Ä–æ–∏–∑–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –≤–æ –∏–∑–±–µ–∂–∞–Ω–∏–∏ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è –∏ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏.
–°—é–¥–∞ –∂–µ –º–æ–∂–Ω–æ –æ—Ç–Ω–µ—Å—Ç–∏ –∏ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ - –∫–∞–∫ –º–∏–Ω–∏–º—É–º —Å—Ç–æ–∏—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –Ω–∞ —Å–ª—É—á–∞–∏ —Å–±–æ–µ–≤ –∏ –Ω–µ–ø–æ–ª–∞–¥–æ–∫. 

–ú–Ω–æ–≥–æ –µ—â–µ –º–æ–∂–Ω–æ –æ–ø–∏—Å–∞—Ç—å –ø—Ä–æ–±–ª–µ–º, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –º–æ–∂–Ω–æ —Å—Ç–æ–ª–∫–Ω—É—Ç—å—Å—è –ø—Ä–∏ –ø–ª–æ—Ö–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫–∞—Ö –ø–æ —Ä–∞–±–æ—Ç–µ —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏, –Ω–æ —ç—Ç–æ –æ—Å–Ω–æ–≤–Ω—ã–µ, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –º–Ω–µ –¥–æ–≤–µ–ª–æ—Å—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–æ–ª–µ–∑–Ω–µ–Ω–Ω–æ –ø–æ–≤—Å—Ç—Ä–µ—á–∞—Ç—å—Å—è...
